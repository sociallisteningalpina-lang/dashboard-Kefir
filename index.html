
    <!DOCTYPE html>
    <html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Panel Interactivo de Campañas</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
        <style>
            * { margin: 0; padding: 0; box-sizing: border-box; }
            body { font-family: 'Arial', sans-serif; background: #f4f7f6; color: #333; }
            .container { max-width: 1400px; margin: 20px auto; }
            .card { background: white; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); margin-bottom: 20px; }
            .header { background: #1e3c72; color: white; padding: 20px; text-align: center; border-radius: 8px 8px 0 0; }
            .header h1 { font-size: 2em; }
            .filters { padding: 15px 20px; display: flex; flex-wrap: wrap; justify-content: center; align-items: center; gap: 20px; }
            .filters label { font-weight: bold; margin-right: 5px; }
            .filters input, .filters select { padding: 8px; border-radius: 5px; border: 1px solid #ccc; }
            .post-links table { width: 100%; border-collapse: collapse; }
            .post-links th, .post-links td { padding: 12px 15px; text-align: left; border-bottom: 1px solid #ddd; }
            .post-links th { background-color: #f8f9fa; }
            .post-links a { color: #007bff; text-decoration: none; font-weight: bold; }
            .post-links a:hover { text-decoration: underline; }
            .pagination-controls { text-align: center; padding: 15px; }
            .pagination-controls button, .filter-btn { padding: 8px 16px; margin: 0 5px; cursor: pointer; border: 1px solid #ccc; background-color: #fff; border-radius: 5px; font-weight: bold; }
            .pagination-controls button:disabled { cursor: not-allowed; background-color: #f8f9fa; color: #aaa; }
            .pagination-controls span { margin: 0 10px; font-weight: bold; vertical-align: middle; }
            .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; padding: 20px; }
            .stat-card { padding: 20px; text-align: center; border-left: 5px solid; }
            
            /* ### MODIFICACIÓN 2: AÑADIR ESTILOS PARA LA NUEVA TARJETA ### */
            .stat-card.total { border-left-color: #007bff; } .stat-card.positive { border-left-color: #28a745; } .stat-card.negative { border-left-color: #dc3545; } .stat-card.neutral { border-left-color: #ffc107; } .stat-card.pautas { border-left-color: #6f42c1; }
            .stat-number { font-size: 2.5em; font-weight: bold; margin-bottom: 5px; }
            .positive-text { color: #28a745; } .negative-text { color: #dc3545; } .neutral-text { color: #ffc107; } .total-text { color: #007bff; } .pautas-text { color: #6f42c1; }

            .charts-section, .comments-section { padding: 20px; }
            .section-title { font-size: 1.5em; margin-bottom: 20px; text-align: center; color: #333; }
            .charts-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 20px; }
            .chart-container { position: relative; height: 400px; } .chart-container.full-width { grid-column: 1 / -1; }
            .comment-item { margin-bottom: 10px; padding: 15px; border-radius: 8px; border-left: 5px solid; word-wrap: break-word; }
            .comment-positive { border-left-color: #28a745; background: #f0fff4; } .comment-negative { border-left-color: #dc3545; background: #fff5f5; } .comment-neutral { border-left-color: #ffc107; background: #fffbeb; }
            .comment-meta { margin-bottom: 8px; font-size: 0.9em; display: flex; justify-content: space-between; align-items: center; }
            .comment-date { color: #6c757d; font-style: italic; }
            .comments-controls { display: flex; justify-content: center; align-items: center; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
            .filter-btn.active { background-color: #007bff; color: white; border-color: #007bff; }
            @media (max-width: 900px) { .charts-grid { grid-template-columns: 1fr; } }
        </style>
    </head>
    <body>
        <script id="data-store" type="application/json">[{"date": "2025-08-26T21:32:52", "comment": "el u\u0301nico kefir de excelente calidad,es el q preparas en tu casa,con los bu\u0301lgaros... artesanal", "sentiment": "Positivo", "topic": "Comparaci\u00f3n con K\u00e9fir Casero/Artesanal", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-28T11:51:54", "comment": "El Kefir,de DEJAMU,no tiene azu\u0301car, es super bueno.", "sentiment": "Positivo", "topic": "Opini\u00f3n General del Producto", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-26T13:55:01", "comment": "si. pero esa marca No , ellos usan azu\u0301car hasta para hacer agua", "sentiment": "Neutro", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-26T10:46:58", "comment": "yo lo hago en casa y es mejor", "sentiment": "Positivo", "topic": "Comparaci\u00f3n con K\u00e9fir Casero/Artesanal", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-29T19:27:52", "comment": "ya alpina saco kefir, y estara\u0301 repleto de dulce y conservantes como es resto de sus productos.", "sentiment": "Positivo", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-29T22:08:58", "comment": "El u\u0301nico kefir es el casero con bu\u0301lgaros ese ya viene procesado .", "sentiment": "Neutro", "topic": "Comparaci\u00f3n con K\u00e9fir Casero/Artesanal", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-28T12:51:53", "comment": "Y si es de la industria, desconfi\u0301e", "sentiment": "Neutro", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-27T01:07:40", "comment": "El Kefir tiene entre 32 y 36 cepas bacterianas. Este tiene apenas 14 lo que indica que es ma\u0301s qui\u0301mico que probio\u0301tico.", "sentiment": "Neutro", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-29T18:00:01", "comment": "y que tal el de d1", "sentiment": "Neutro", "topic": "Competencia y Disponibilidad", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-26T09:24:58", "comment": "si claro, el frutin\u0303o tiene todas las vitaminas, de pronto es mejor que el bonice", "sentiment": "Positivo", "topic": "Opini\u00f3n General del Producto", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-31T10:41:12", "comment": "kefir es muy saludable pero Natura, lo preparo en casa y me ayuda mucho", "sentiment": "Positivo", "topic": "Comparaci\u00f3n con K\u00e9fir Casero/Artesanal", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-28T16:10:38", "comment": "yo tambie\u0301n preparo mi propio kefir y es delicioso", "sentiment": "Positivo", "topic": "Opini\u00f3n General del Producto", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-26T21:10:22", "comment": "El kefir no se debe almacenar en botellas de pla\u0301stico", "sentiment": "Neutro", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-26T18:14:52", "comment": "Buenas tardes, do\u0301nde se consigue esa botellita de Kefir. Quedo\u0301 atenta", "sentiment": "Neutro", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-30T22:19:45", "comment": "un producto industrial no es un alimento...", "sentiment": "Neutro", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-26T14:16:16", "comment": "Kegir es excelente pero es mejor el dejamu que no contiene azucar", "sentiment": "Positivo", "topic": "Preguntas sobre el Producto", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-26T16:25:04", "comment": "es muy muy bueno esto me ayudo a recuperarme despue\u0301s del tratamiento del Helicobacter pylori ,gracias a Dios estoy sana", "sentiment": "Positivo", "topic": "Ingredientes y Salud", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-26T12:07:27", "comment": "una pregunta las personas que les dio\u0301 ca\u0301ncer lo pueden tomar kefir gracias", "sentiment": "Neutro", "topic": "Preguntas sobre el Producto", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-26T10:17:10", "comment": "Cualquier \u201calimento\u201d industrializado es M, nada reemplaza a aquello que produce la naturaleza", "sentiment": "Positivo", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-26T14:38:50", "comment": "pocos saben que lo pueden hacer en casa de forma sencilla y econo\u0301mica \ud83e\udd70", "sentiment": "Positivo", "topic": "Comparaci\u00f3n con K\u00e9fir Casero/Artesanal", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-28T13:27:53", "comment": "yo lo hago \ud83e\udd70", "sentiment": "Positivo", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-28T11:49:03", "comment": "Si el mejor es de DEJAMU.", "sentiment": "Positivo", "topic": "Opini\u00f3n General del Producto", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-29T09:22:15", "comment": "alpina no es bueno", "sentiment": "Negativo", "topic": "Opini\u00f3n General del Producto", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-30T15:35:42", "comment": "gracias pero el de IDS y ninguna empresa es mejor que el realmente natural uds se tiran semejante alimento con azu\u0301cares y fructosa", "sentiment": "Negativo", "topic": "Opini\u00f3n General del Producto", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-28T18:15:07", "comment": "no hay como el ke\u0301fir q uno mismo prepara esos procesados no son confiables", "sentiment": "Negativo", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-28T21:56:59", "comment": "Si pero si tiene solo 14 sepas ya esta tratado", "sentiment": "Neutro", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-28T16:07:16", "comment": "si yo tengo ca\u0301lculos lo puedo tomar", "sentiment": "Neutro", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-28T10:57:37", "comment": "\u00bfY no se han dado cuenta que\u0301 los que : Intentamos influenciar estamos igual o peor que\u0301 los dema\u0301s?", "sentiment": "Negativo", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-29T11:24:23", "comment": "aaa q pesar del doc q ya esta\u0301 haciendo es publicidad", "sentiment": "Negativo", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-28T16:41:18", "comment": "Ahora contratan un influencer y le ponen sudadera de nutricionista y tenemos que creerles.", "sentiment": "Negativo", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-27T21:52:08", "comment": "como lo hago en casa gracias", "sentiment": "Neutro", "topic": "Comparaci\u00f3n con K\u00e9fir Casero/Artesanal", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-27T19:53:49", "comment": "Y quien es el para dar ese juicio de valor? ponerse bata no lo hace nutricionista...", "sentiment": "Negativo", "topic": "Preguntas sobre el Producto", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-26T01:53:28", "comment": "Es mejor el de agua", "sentiment": "Positivo", "topic": "Opini\u00f3n General del Producto", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-28T01:15:28", "comment": "Alguna persona que Venda los Bulgaros X favor los Necesito Urgente vivo en Bogota\u0301", "sentiment": "Neutro", "topic": "Comparaci\u00f3n con K\u00e9fir Casero/Artesanal", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-27T04:28:30", "comment": "Consuman keffir de sketos es el mejor \ud83e\udd70", "sentiment": "Positivo", "topic": "Opini\u00f3n General del Producto", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-27T22:48:27", "comment": "Para la gastritis es bueno?", "sentiment": "Neutro", "topic": "Ingredientes y Salud", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-26T13:30:17", "comment": "no sabia que alpina lo vendia", "sentiment": "Neutro", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-30T16:11:38", "comment": "yo me tome\u0301 uno lo compre\u0301 Enel supermercado D1 pequen\u0303o y me lo tome\u0301 todo casi me da algo me cayo\u0301 mal \ud83d\ude0f\ud83d\ude2d", "sentiment": "Negativo", "topic": "Competencia y Disponibilidad", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-30T12:12:55", "comment": "Yo tengo kefir original y le regalo la cepa a los amigos y conocidos. Es fa\u0301cil de hacer y es muy econo\u0301mico", "sentiment": "Positivo", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-30T11:41:25", "comment": "\ud83e\udd70Por fin Alpina nos hizo Kefir\ud83e\udd70\ud83e\udd70\ud83e\udd70", "sentiment": "Positivo", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-30T21:03:00", "comment": "el mejor kefir que hay es el suero costen\u0303o.", "sentiment": "Positivo", "topic": "Opini\u00f3n General del Producto", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-29T19:39:05", "comment": "a que\u0301 sabe? jama\u0301s he probado el kefir.\npregunto: Sabe a kumis ?", "sentiment": "Negativo", "topic": "Opini\u00f3n General del Producto", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-30T16:16:11", "comment": "Ese kefir de alpina cada cuanto lo tomo y que cantidad??", "sentiment": "Neutro", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-31T01:52:05", "comment": "Yo amo el kefir pero me toca tomarlo en la noche porque tengo que tomar hierro pero seri\u0301a el hit en ayunas es delicioso", "sentiment": "Neutro", "topic": "Opini\u00f3n General del Producto", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-27T14:11:16", "comment": "todo lo que sale de las grandes fa\u0301bricas es ma\u0301s malo", "sentiment": "Negativo", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-26T15:21:44", "comment": "\u00bfy en la publicidad dicen que esta\u0301 lleno de azu\u0301car?", "sentiment": "Negativo", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-27T15:03:38", "comment": "cmo hacen los bu\u0301lgaros gracias", "sentiment": "Neutro", "topic": "Fuera de Tema / No Relevante", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-26T22:57:09", "comment": "solo azucar , me quedo con las vitaminas del frutin\u0303o", "sentiment": "Neutro", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-29T20:34:02", "comment": "son exelente yo los preparo y estoy muy aliviada de la gastritis.", "sentiment": "Positivo", "topic": "Ingredientes y Salud", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-27T15:15:40", "comment": "que bueno", "sentiment": "Neutro", "topic": "Opini\u00f3n General del Producto", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-30T20:21:21", "comment": "que. precio tiene", "sentiment": "Neutro", "topic": "Preguntas sobre el Producto", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-26T15:08:36", "comment": "de que es la preparacio\u0301n", "sentiment": "Neutro", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-27T16:29:57", "comment": "y no tiene azu\u0301car?", "sentiment": "Neutro", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-27T16:16:50", "comment": "yo lo compro en el e\u0301xito \ud83d\ude0f", "sentiment": "Positivo", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-30T11:16:04", "comment": "es excelente!!! aunque lo consigues de diferente marcas siempre sera\u0301 costoso!!! botella de 1000 esta\u0301 entre 27 mil a 35 mil pesos!!!", "sentiment": "Neutro", "topic": "Opini\u00f3n General del Producto", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-26T15:48:57", "comment": "donde se compra", "sentiment": "Neutro", "topic": "Preguntas sobre el Producto", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-26T16:20:37", "comment": "donde se consigue", "sentiment": "Neutro", "topic": "Preguntas sobre el Producto", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-29T20:29:22", "comment": "en que momento se debe tomar", "sentiment": "Neutro", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-31T10:55:23", "comment": "A que hora es mejor tomarlo", "sentiment": "Neutro", "topic": "Opini\u00f3n General del Producto", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-27T15:48:58", "comment": "con este patrocinio confirmo por q no le creo tanto a este sen\u0303or", "sentiment": "Negativo", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-27T18:42:12", "comment": "y los ultra procesados?", "sentiment": "Neutro", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-26T11:32:36", "comment": "do\u0301nde puedo conseguir los bu\u0301lgaros para hacer keyfir", "sentiment": "Neutro", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-31T00:34:30", "comment": "ningu\u0301n alimento procesado es tan saludable.", "sentiment": "Negativo", "topic": "Ingredientes y Salud", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-31T11:35:02", "comment": "Bueno pero en el d1 ya lo consiguen a 4mil, alpina mi\u0301nimo 15k", "sentiment": "Neutro", "topic": "Competencia y Disponibilidad", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-30T21:49:12", "comment": "yo lo hago en casa su\u0301per \ud83d\ude0f", "sentiment": "Positivo", "topic": "Comparaci\u00f3n con K\u00e9fir Casero/Artesanal", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-31T10:14:34", "comment": "tiene azu\u0301car?", "sentiment": "Neutro", "topic": "Fuera de Tema / No Relevante", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-29T21:36:59", "comment": "lo ma\u0301s natural y econo\u0301mico en casa\ntu mismo lo haces \ud83d\ude0b", "sentiment": "Positivo", "topic": "Comparaci\u00f3n con K\u00e9fir Casero/Artesanal", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-28T22:00:59", "comment": "Que ironi\u0301a hace an\u0303os le quitaron todos los probioticos que ya trai\u0301a el yogur porque era malo y ahora lo venden ma\u0301s caro porque es necesario.", "sentiment": "Negativo", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-31T09:06:16", "comment": "Si dice que sabe bueno es por que tiene azu\u0301car entocnes por que no tiene sellos?", "sentiment": "Neutro", "topic": "Opini\u00f3n General del Producto", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-30T15:23:02", "comment": "el mejor es el que haces en casa, yo lo preparo es su\u0301per fa\u0301cil.", "sentiment": "Positivo", "topic": "Comparaci\u00f3n con K\u00e9fir Casero/Artesanal", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-30T16:12:19", "comment": "alguien que me ensen\u0303e", "sentiment": "Neutro", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-30T20:08:32", "comment": "Pero donde lo consigo porque lo ando buscando. En que\u0301 tiendas esta\u0301n ? Porque en las oli\u0301mpicas no", "sentiment": "Neutro", "topic": "Preguntas sobre el Producto", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-29T20:13:09", "comment": "es excelente", "sentiment": "Neutro", "topic": "Opini\u00f3n General del Producto", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-26T12:50:13", "comment": "lei\u0301 los ingredientes...y tiene almido\u0301n de mai\u0301z ! que hace ese ingrediente ahi\u0301 ?", "sentiment": "Neutro", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-26T12:33:02", "comment": "receta por favor", "sentiment": "Neutro", "topic": "Fuera de Tema / No Relevante", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-31T00:48:05", "comment": "yo lo tome y me sento de maravilla", "sentiment": "Positivo", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-27T10:50:45", "comment": "yo lo consumo regularmente y es un regalo para nuestro segundo cerebro entre ma\u0301s natural sea el ke\u0301fir mucho mejor", "sentiment": "Positivo", "topic": "Opini\u00f3n General del Producto", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-26T15:49:39", "comment": "hay de color y sabor natural ?", "sentiment": "Neutro", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-31T16:09:27", "comment": "lo compre porque me lo recomendaron para la gastritis pero casi muero de gases. terrible no lo tolero.", "sentiment": "Negativo", "topic": "Ingredientes y Salud", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-28T21:57:11", "comment": "Es mejor hacerlo en casa", "sentiment": "Positivo", "topic": "Comparaci\u00f3n con K\u00e9fir Casero/Artesanal", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-26T18:59:08", "comment": "yo lo tome\u0301 y me ja mejorado mucho la gastritis", "sentiment": "Positivo", "topic": "Ingredientes y Salud", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-29T15:52:18", "comment": "lo necesito", "sentiment": "Neutro", "topic": "Fuera de Tema / No Relevante", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-31T11:48:01", "comment": "siempre dicen que no tienen conservantes y tiene todo lo malo, es mejor algo natural.", "sentiment": "Negativo", "topic": "Opini\u00f3n General del Producto", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-27T04:28:57", "comment": "si claro", "sentiment": "Neutro", "topic": "Fuera de Tema / No Relevante", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-28T17:53:07", "comment": "buenas tardes que precio tiene", "sentiment": "Neutro", "topic": "Preguntas sobre el Producto", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-26T12:30:09", "comment": "Una pregunta \u00bf las personas con artritis las podemos consumir?", "sentiment": "Neutro", "topic": "Preguntas sobre el Producto", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-30T14:51:43", "comment": "y cua\u0301ntos granos de azu\u0301car?", "sentiment": "Neutro", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-31T04:29:09", "comment": "no ayuda en nada", "sentiment": "Negativo", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-27T10:57:04", "comment": "lo mejor de lo mejor yo lo preparo en casa con mis bu\u0301lgaros", "sentiment": "Positivo", "topic": "Comparaci\u00f3n con K\u00e9fir Casero/Artesanal", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-27T18:56:20", "comment": "no tengo plata", "sentiment": "Negativo", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-28T11:19:31", "comment": "No le he visto en super mercado", "sentiment": "Negativo", "topic": "Opini\u00f3n General del Producto", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-31T10:10:24", "comment": "Yo lo estoy preparando en casa pero no me alcanzo a tomar todo el que preparo porque lo hago cada 12 horas para que no me quede tan a\u0301cido", "sentiment": "Neutro", "topic": "Comparaci\u00f3n con K\u00e9fir Casero/Artesanal", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-26T20:42:54", "comment": "eso no es natural, es mejor prepararlo en casa", "sentiment": "Neutro", "topic": "Comparaci\u00f3n con K\u00e9fir Casero/Artesanal", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-27T19:22:55", "comment": "Como lo compro", "sentiment": "Neutro", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-28T21:41:22", "comment": "El mejor Kefir es el que saca en casa", "sentiment": "Positivo", "topic": "Comparaci\u00f3n con K\u00e9fir Casero/Artesanal", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-28T10:54:50", "comment": "cua\u0301nto le esta\u0301n pagando por esa promocio\u0301n", "sentiment": "Neutro", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-28T07:00:46", "comment": "este sen\u0303or perdio\u0301 la credibilidad ahora si", "sentiment": "Negativo", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-31T16:06:51", "comment": "No solo no saben lo que realmente es , sino que no lo saben pronunciar... \ud83d\ude09\ud83e\udd23 Lleva TILDE en la e, no en la i... \ud83e\udd2d\ud83e\udd23", "sentiment": "Negativo", "topic": "Otros", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-29T14:32:26", "comment": "y que decir del Precio ????\ud83d\ude33\ud83d\ude33\ud83d\ude33", "sentiment": "Neutro", "topic": "Preguntas sobre el Producto", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}, {"date": "2025-08-27T11:20:23", "comment": "y el precio", "sentiment": "Neutro", "topic": "Preguntas sobre el Producto", "platform": "TikTok", "post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "post_label": "Pauta 1 (TikTok)"}]</script>
        <script id="posts-data-store" type="application/json">[{"post_url": "https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg", "platform": "TikTok", "comment_count": 100, "post_label": "Pauta 1 (TikTok)"}]</script>

        <div class="container">
            <div class="card">
                <div class="header"><h1>📊 Panel Interactivo de Campañas</h1></div>
                <div class="filters">
                    <label for="startDate">Inicio:</label> <input type="date" id="startDate" value="2025-08-26"> <input type="time" id="startTime" value="00:00">
                    <label for="endDate">Fin:</label> <input type="date" id="endDate" value="2025-08-31"> <input type="time" id="endTime" value="23:59">
                    <label for="platformFilter">Red Social:</label> <select id="platformFilter"><option value="Todas">Todas</option><option value="Facebook">Facebook</option><option value="Instagram">Instagram</option><option value="TikTok">TikTok</option></select>
                    <label for="postFilter">Pauta Específica:</label> <select id="postFilter"><option value="Todas">Ver Todas las Pautas</option><option value="https://www.tiktok.com/@user360907502/video/7542610432733859080?_r=1&_t=ZS-900eDVc8Hkg">Pauta 1 (TikTok)</option></select>
                </div>
            </div>
            
            <div class="card post-links">
                <h2 class="section-title">Listado de Pautas Activas</h2>
                <div id="post-links-table"></div>
                <div id="post-links-pagination" class="pagination-controls"></div>
            </div>

            <div class="card"><div id="stats-grid" class="stats-grid"></div></div>
            
            <div class="card charts-section">
                <h2 class="section-title">Análisis General</h2>
                <div class="charts-grid">
                    <div class="chart-container"><canvas id="postCountChart"></canvas></div><div class="chart-container"><canvas id="sentimentChart"></canvas></div><div class="chart-container"><canvas id="topicsChart"></canvas></div>
                    <div class="chart-container full-width"><canvas id="sentimentByTopicChart"></canvas></div><div class="chart-container full-width"><canvas id="dailyChart"></canvas></div><div class="chart-container full-width"><canvas id="hourlyChart"></canvas></div>
                </div>
            </div>
            
            <div class="card comments-section">
                <h2 class="section-title">💬 Comentarios Filtrados</h2>
                <div id="comments-controls" class="comments-controls"></div>
                <div id="comments-list"></div>
                <div id="comments-pagination" class="pagination-controls"></div>
            </div>
        </div>

        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const allData = JSON.parse(document.getElementById('data-store').textContent);
                const allPostsData = JSON.parse(document.getElementById('posts-data-store').textContent);
                
                const startDateInput = document.getElementById('startDate'), startTimeInput = document.getElementById('startTime');
                const endDateInput = document.getElementById('endDate'), endTimeInput = document.getElementById('endTime');
                const platformFilter = document.getElementById('platformFilter'), postFilter = document.getElementById('postFilter');

                const charts = {};
                Object.assign(charts, {
                    postCount: new Chart(document.getElementById('postCountChart'), { type: 'doughnut', options: { responsive: true, maintainAspectRatio: false, plugins: { title: { display: true, text: 'Distribución de Pautas por Red Social' } } } }),
                    sentiment: new Chart(document.getElementById('sentimentChart'), { type: 'doughnut', options: { responsive: true, maintainAspectRatio: false, plugins: { title: { display: true, text: 'Distribución de Sentimientos' } } } }),
                    topics: new Chart(document.getElementById('topicsChart'), { type: 'bar', options: { responsive: true, maintainAspectRatio: false, indexAxis: 'y', plugins: { legend: { display: false }, title: { display: true, text: 'Temas Principales' } } } }),
                    sentimentByTopic: new Chart(document.getElementById('sentimentByTopicChart'), { type: 'bar', options: { responsive: true, maintainAspectRatio: false, indexAxis: 'y', scales: { x: { stacked: true }, y: { stacked: true } }, plugins: { title: { display: true, text: 'Sentimiento por Tema' } } } }),
                    daily: new Chart(document.getElementById('dailyChart'), { type: 'bar', options: { responsive: true, maintainAspectRatio: false, scales: { x: { stacked: true }, y: { stacked: true } }, plugins: { title: { display: true, text: 'Volumen de Comentarios por Día' } } } }),
                    hourly: new Chart(document.getElementById('hourlyChart'), { type: 'bar', options: { responsive: true, maintainAspectRatio: false, scales: { x: { stacked: true }, y: { stacked: true, position: 'left', title: { display: true, text: 'Comentarios por Hora' } }, y1: { position: 'right', grid: { drawOnChartArea: false }, title: { display: true, text: 'Total Acumulado' } } }, plugins: { title: { display: true, text: 'Volumen de Comentarios por Hora' } } } })
                });

                let postLinksCurrentPage = 1;
                const POST_LINKS_PER_PAGE = 5;
                let commentsCurrentPage = 1;
                const COMMENTS_PER_PAGE = 10;
                let commentsSentimentFilter = 'Todos';

                const updatePostLinks = () => {
                    const selectedPlatform = platformFilter.value;
                    const postsToShow = (selectedPlatform === 'Todas') ? allPostsData : allPostsData.filter(p => p.platform === selectedPlatform);
                    
                    const tableDiv = document.getElementById('post-links-table');
                    const paginationDiv = document.getElementById('post-links-pagination');
                    tableDiv.innerHTML = ''; paginationDiv.innerHTML = '';
                    if (postsToShow.length === 0) return;

                    const totalPages = Math.ceil(postsToShow.length / POST_LINKS_PER_PAGE);
                    if (postLinksCurrentPage > totalPages) postLinksCurrentPage = 1;

                    const startIndex = (postLinksCurrentPage - 1) * POST_LINKS_PER_PAGE;
                    const paginatedPosts = postsToShow.slice(startIndex, startIndex + POST_LINKS_PER_PAGE);

                    let tableHTML = '<table><tr><th>Pauta</th><th>Total Comentarios</th><th>Enlace</th></tr>';
                    paginatedPosts.forEach(p => {
                        tableHTML += `<tr><td>${p.post_label}</td><td><b>${p.comment_count}</b></td><td><a href="${p.post_url}" target="_blank">Ver Pauta</a></td></tr>`;
                    });
                    tableHTML += '</table>';
                    tableDiv.innerHTML = tableHTML;

                    if (totalPages > 1) {
                        paginationDiv.innerHTML = `<button id="prevPageBtn" ${ (postLinksCurrentPage === 1) ? 'disabled' : '' }>Anterior</button><span>Página ${postLinksCurrentPage} de ${totalPages}</span><button id="nextPageBtn" ${ (postLinksCurrentPage === totalPages) ? 'disabled' : '' }>Siguiente</button>`;
                        document.getElementById('prevPageBtn')?.addEventListener('click', () => { if (postLinksCurrentPage > 1) { postLinksCurrentPage--; updatePostLinks(); } });
                        document.getElementById('nextPageBtn')?.addEventListener('click', () => { if (postLinksCurrentPage < totalPages) { postLinksCurrentPage++; updatePostLinks(); } });
                    }
                };
                
                const updateDashboard = () => {
                    const startFilter = `${startDateInput.value}T${startTimeInput.value}:00`;
                    const endFilter = `${endDateInput.value}T${endTimeInput.value}:59`;
                    const selectedPlatform = platformFilter.value;
                    const selectedPost = postFilter.value;
                    
                    // ### MODIFICACIÓN 2: LÓGICA PARA CALCULAR PAUTAS A MOSTRAR ###
                    let filteredData = allData.filter(d => d.date >= startFilter && d.date <= endFilter);
                    let postsToShow = allPostsData; 

                    if (selectedPost !== 'Todas') {
                        filteredData = filteredData.filter(d => d.post_url === selectedPost);
                        postsToShow = allPostsData.filter(p => p.post_url === selectedPost);
                    } else if (selectedPlatform !== 'Todas') {
                        filteredData = filteredData.filter(d => d.platform === selectedPlatform);
                        postsToShow = allPostsData.filter(p => p.platform === selectedPlatform);
                    }
                    
                    updateStats(filteredData, postsToShow.length);
                    updateCharts(allPostsData, filteredData);
                    updateCommentsList(filteredData);
                };
                
                // ### MODIFICACIÓN 2: FUNCIÓN updateStats ACTUALIZADA ###
                const updateStats = (data, totalPosts) => {
                    const total = data.length;
                    const sentiments = data.reduce((acc, curr) => { acc[curr.sentiment] = (acc[curr.sentiment] || 0) + 1; return acc; }, {});
                    const pos = sentiments['Positivo'] || 0;
                    const neg = sentiments['Negativo'] || 0;
                    const neu = sentiments['Neutro'] || 0;
                    
                    document.getElementById('stats-grid').innerHTML = `
                        <div class="stat-card pautas">
                            <div class="stat-number pautas-text">${totalPosts}</div>
                            <div>Total Pautas</div>
                        </div>
                        <div class="stat-card total">
                            <div class="stat-number total-text">${total}</div>
                            <div>Total Comentarios</div>
                        </div>
                        <div class="stat-card positive">
                            <div class="stat-number positive-text">${pos}</div>
                            <div>Positivos (${(total > 0 ? (pos / total * 100) : 0).toFixed(1)}%)</div>
                        </div>
                        <div class="stat-card negative">
                            <div class="stat-number negative-text">${neg}</div>
                            <div>Negativos (${(total > 0 ? (neg / total * 100) : 0).toFixed(1)}%)</div>
                        </div>
                        <div class="stat-card neutral">
                            <div class="stat-number neutral-text">${neu}</div>
                            <div>Neutros (${(total > 0 ? (neu / total * 100) : 0).toFixed(1)}%)</div>
                        </div>
                    `;
                };
                
                const updateCommentsList = (data) => {
                    const dataToShow = (commentsSentimentFilter === 'Todos') ? data : data.filter(d => d.sentiment === commentsSentimentFilter);
                    dataToShow.sort((a, b) => b.date.localeCompare(a.date));

                    const controlsDiv = document.getElementById('comments-controls');
                    const listDiv = document.getElementById('comments-list');
                    const paginationDiv = document.getElementById('comments-pagination');
                    listDiv.innerHTML = ''; paginationDiv.innerHTML = '';
                    
                    controlsDiv.innerHTML = ['Todos', 'Positivo', 'Negativo', 'Neutro'].map(s => 
                        `<button class="filter-btn ${commentsSentimentFilter === s ? 'active' : ''}" data-sentiment="${s}">${s}</button>`
                    ).join('');
                    
                    controlsDiv.querySelectorAll('.filter-btn').forEach(btn => {
                        btn.addEventListener('click', (e) => {
                            commentsSentimentFilter = e.target.dataset.sentiment;
                            commentsCurrentPage = 1;
                            updateCommentsList(data);
                        });
                    });

                    if (dataToShow.length === 0) {
                        listDiv.innerHTML = "<p style='text-align:center;'>No hay comentarios para mostrar.</p>";
                        return;
                    }

                    const totalPages = Math.ceil(dataToShow.length / COMMENTS_PER_PAGE);
                    if (commentsCurrentPage > totalPages) commentsCurrentPage = 1;

                    const startIndex = (commentsCurrentPage - 1) * COMMENTS_PER_PAGE;
                    const paginatedComments = dataToShow.slice(startIndex, startIndex + COMMENTS_PER_PAGE);

                    const sentimentToCss = { 'Positivo': 'positive', 'Negativo': 'negative', 'Neutro': 'neutral' };
                    let listHtml = '';
                    paginatedComments.forEach(d => {
                        const escapedComment = d.comment.replace(/</g, "&lt;").replace(/>/g, "&gt;");
                        const formattedDate = new Date(d.date).toLocaleString('es-CO', { day: 'numeric', month: 'short', year: 'numeric', hour: '2-digit', minute:'2-digit' });
                        listHtml += `<div class="comment-item comment-${sentimentToCss[d.sentiment]}">
                                        <div class="comment-meta">
                                            <strong>[${d.sentiment.toUpperCase()}] (Tema: ${d.topic})</strong>
                                            <span class="comment-date">${formattedDate}</span>
                                        </div>
                                        <div>${escapedComment}</div>
                                    </div>`;
                    });
                    listDiv.innerHTML = listHtml;

                    if (totalPages > 1) {
                        paginationDiv.innerHTML = `<button id="prevCommentPageBtn" ${ (commentsCurrentPage === 1) ? 'disabled' : '' }>Anterior</button><span>Página ${commentsCurrentPage} de ${totalPages}</span><button id="nextCommentPageBtn" ${ (commentsCurrentPage === totalPages) ? 'disabled' : '' }>Siguiente</button>`;
                        document.getElementById('prevCommentPageBtn')?.addEventListener('click', () => { if (commentsCurrentPage > 1) { commentsCurrentPage--; updateCommentsList(data); } });
                        document.getElementById('nextCommentPageBtn')?.addEventListener('click', () => { if (commentsCurrentPage < totalPages) { commentsCurrentPage++; updateCommentsList(data); } });
                    }
                };

                const updateCharts = (postsData, filteredData) => { 
                    const postCounts = postsData.reduce((acc, curr) => { acc[curr.platform] = (acc[curr.platform] || 0) + 1; return acc; }, {}); const postCountLabels = Object.keys(postCounts); charts.postCount.data.labels = postCountLabels; charts.postCount.data.datasets = [{ data: postCountLabels.map(p => postCounts[p]), backgroundColor: ['#007bff', '#6f42c1', '#dc3545', '#ffc107', '#28a745'] }]; charts.postCount.update(); 
                    const sentimentCounts = filteredData.reduce((acc, curr) => { acc[curr.sentiment] = (acc[curr.sentiment] || 0) + 1; return acc; }, {}); charts.sentiment.data.labels = ['Positivo', 'Negativo', 'Neutro']; charts.sentiment.data.datasets = [{ data: [sentimentCounts['Positivo']||0, sentimentCounts['Negativo']||0, sentimentCounts['Neutro']||0], backgroundColor: ['#28a745', '#dc3545', '#ffc107'] }]; charts.sentiment.update(); const topicCounts = filteredData.reduce((acc, curr) => { acc[curr.topic] = (acc[curr.topic] || 0) + 1; return acc; }, {}); const sortedTopics = Object.entries(topicCounts).sort((a, b) => b[1] - a[1]); charts.topics.data.labels = sortedTopics.map(d => d[0]); charts.topics.data.datasets = [{ label: 'Comentarios', data: sortedTopics.map(d => d[1]), backgroundColor: '#3498db' }]; charts.topics.update(); const sbtCounts = filteredData.reduce((acc, curr) => { if (!acc[curr.topic]) acc[curr.topic] = { Positivo: 0, Negativo: 0, Neutro: 0 }; acc[curr.topic][curr.sentiment]++; return acc; }, {}); const sbtLabels = Object.keys(sbtCounts).sort((a,b) => (sbtCounts[b].Positivo + sbtCounts[b].Negativo + sbtCounts[b].Neutro) - (sbtCounts[a].Positivo + sbtCounts[a].Negativo + sbtCounts[a].Neutro)); charts.sentimentByTopic.data.labels = sbtLabels; charts.sentimentByTopic.data.datasets = [ { label: 'Positivo', data: sbtLabels.map(l => sbtCounts[l].Positivo), backgroundColor: '#28a745' }, { label: 'Negativo', data: sbtLabels.map(l => sbtCounts[l].Negativo), backgroundColor: '#dc3545' }, { label: 'Neutro', data: sbtLabels.map(l => sbtCounts[l].Neutro), backgroundColor: '#ffc107' } ]; charts.sentimentByTopic.update(); const dailyCounts = filteredData.reduce((acc, curr) => { const day = curr.date.substring(0, 10); if (!acc[day]) { acc[day] = { Positivo: 0, Negativo: 0, Neutro: 0 }; } acc[day][curr.sentiment]++; return acc; }, {}); const sortedDays = Object.keys(dailyCounts).sort(); charts.daily.data.labels = sortedDays.map(d => new Date(d+'T00:00:00').toLocaleDateString('es-CO', { year: 'numeric', month: 'short', day: 'numeric' })); charts.daily.data.datasets = [ { label: 'Positivo', data: sortedDays.map(d => dailyCounts[d].Positivo), backgroundColor: '#28a745' }, { label: 'Negativo', data: sortedDays.map(d => dailyCounts[d].Negativo), backgroundColor: '#dc3545' }, { label: 'Neutro', data: sortedDays.map(d => dailyCounts[d].Neutro), backgroundColor: '#ffc107' } ]; charts.daily.update(); const hourlyCounts = filteredData.reduce((acc, curr) => { const hour = curr.date.substring(0, 13) + ':00:00'; if (!acc[hour]) acc[hour] = { Positivo: 0, Negativo: 0, Neutro: 0, Total: 0 }; acc[hour][curr.sentiment]++; acc[hour].Total++; return acc; }, {}); const sortedHours = Object.keys(hourlyCounts).sort(); let cumulative = 0; const cumulativeData = sortedHours.map(h => { cumulative += hourlyCounts[h].Total; return cumulative; }); charts.hourly.data.labels = sortedHours.map(h => new Date(h).toLocaleString('es-CO', { day: '2-digit', month: 'short', hour: '2-digit', minute:'2-digit' })); charts.hourly.data.datasets = [ { label: 'Positivo', data: sortedHours.map(h => hourlyCounts[h].Positivo), backgroundColor: '#28a745', yAxisID: 'y' }, { label: 'Negativo', data: sortedHours.map(h => hourlyCounts[h].Negativo), backgroundColor: '#dc3545', yAxisID: 'y' }, { label: 'Neutro', data: sortedHours.map(h => hourlyCounts[h].Neutro), backgroundColor: '#ffc107', yAxisID: 'y' }, { label: 'Acumulado', type: 'line', data: cumulativeData, borderColor: '#007bff', yAxisID: 'y1' } ]; charts.hourly.update(); 
                };
                
                const updatePostFilterOptions = () => { const selectedPlatform = platformFilter.value; const currentPostSelection = postFilter.value; let postsToShow = (selectedPlatform === 'Todas') ? allPostsData : allPostsData.filter(p => p.platform === selectedPlatform); postFilter.innerHTML = '<option value="Todas">Ver Todas las Pautas</option>'; postsToShow.forEach(p => { postFilter.innerHTML += `<option value="${p.post_url}">${p.post_label}</option>`; }); if (postsToShow.some(p => p.post_url === currentPostSelection)) { postFilter.value = currentPostSelection; } else { postFilter.value = 'Todas'; } };

                platformFilter.addEventListener('change', () => { updatePostFilterOptions(); postLinksCurrentPage = 1; updatePostLinks(); updateDashboard(); });
                postFilter.addEventListener('change', updateDashboard);
                startDateInput.addEventListener('change', updateDashboard); startTimeInput.addEventListener('change', updateDashboard);
                endDateInput.addEventListener('change', updateDashboard); endTimeInput.addEventListener('change', updateDashboard);
                
                updatePostLinks();
                updateDashboard();
            });
        </script>
    </body>
    </html>
    